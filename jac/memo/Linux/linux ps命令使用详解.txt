PS是LINUX下最常用的也是非常强大的进程查看命令

1. ps简介

前面介绍的两个命令都是用于查看当前系统用户的情况，下面就来看看进程的情况，这也是本章的主题。

要对进程进行监测和控制，首先必须要了解当前进程的情况，也就是需要查看当前进程，而ps命令就是最基本

同时也是非常强大的进程查看命令。使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、

进程有没有僵死、哪些进程占用了过多的资源等等。总之大部分信息都是可以通过执行该命令得到的。

2. ps命令及其参数

ps命令最常用的还是用于监控后台进程的工作情况，因为后台进程是不和屏幕键盘这些标准输入/输出设

备进行通信的，所以如果需要检测其情况，便可以使用ps命令了。

该命令语法格式如下：

ps [选项]

下面对命令选项进行说明：

-e 显示所有进程。

-f 全格式。

-h 不显示标题。

-l 长格式。

-w 宽输出。

a 显示终端上的所有进程，包括其他用户的进程。

r 只显示正在运行的进程。

x 显示没有控制终端的进程。

O[+|-] k1 [，[+|-] k2 [，…]] 根据SHORT KEYS、k1、k2中快捷键指定的多级排序顺序显示进程列表。

对于ps的不同格式都存在着默认的顺序指定。这些默认顺序可以被用户的指定所覆盖。其中“+”字符是可选

的，“-”字符是倒转指定键的方向。

pids 只列出付 痰那榭觥８鹘 ID之间使用逗号分隔。该进程列表必须在命令行参数的最后一个选项

后面紧接着给出，中间不能插入空格。比如：ps -f1,4,5。

以下介绍长命令行选项，这些选项都使用“--”开头：

--sort X[+|-] key [，[+|-] key [，…]] 从SORT KEYS段中选一个多字母键。“+”字符是可选的，因

为默认的方向就是按数字升序或者词典顺序。比如： ps -jax -sort=uid，-ppid，+pid。

--help 显示帮助信息。

--version 显示该命令的版本信息。

在前面的选项说明中提到了排序键，接下来对排序键作进一步说明。需要注意的是排序中使用的值是ps使

用的内部值，并非仅用于某些输出格式的伪值。排序键列表见表4-3。

表4-3　排序键列表

短格式 
长格式 
说 明 

c 
cmd 
可执行的简单名称 

C 
cmdline 
完整命令行 

f 
flags 
长模式标志 

g 
pgrp 
进程的组ID 

G 
tpgid 
控制tty进程组ID 

j 
cutime 
累计用户时间 

J 
cstime 
累计系统时间 

k 
utime 
用户时间 

K 
stime 
系统时间 

m 
min_flt 
次要页错误的数量 

M 
maj_flt 
主要页错误的数量 

n 
cmin_flt 
累计次要页错误 

N 
cmaj_flt 
累计主要页错误 

o 
session 
对话ID 

p 
pid 
进程ID 

P 
ppid 
父进程ID 

r 
rss 
驻留大小 

R 
resident 
驻留页 

s 
size 
内存大小（千字节） 

S 
share 
共享页的数量 

t 
tty 
tty次要设备号 

T 
start_time 
进程启动的时间 

U 
uid 
UID 

u 
user 
用户名 

v 
vsize 
总的虚拟内存数量（字节） 

y 
priority 
内核调度优先级 

3. 常用ps命令参数

前面两节介绍的参数可能让读者觉得有些可怕，实际上这是一个非常容易使用的命令，一般的用户只

需掌握一些最常用的命令参数就可以了。

最常用的三个参数是u、a、x，下面将通过例子来说明其具体用法。

[例20] 以root身份登录系统，查看当前进程状况

$ ps

PID TTY TIME COMMAND

5800 ttyp0 00:00:00 bash

5835 ttyp0 00:00:00 ps

可以看到，显示的项目共分为四项，依次为PID（进程ID）、TTY（终端名称）、TIME（进程执行时间）

、COMMAND（该进程的命令行输入）。

可以使用u选项来查看进程所有者及其他一些详细信息，如下所示：

$ ps u

USER PID %CPU %MEM USZ RSS TTY STAT START TIME COMMAND

test 5800 0.0 0.4 1892 1040 ttyp0 S Nov27 0:00 -bash

test 5836 0.0 0.3 2528 856 ttyp0 R Nov27 0:00 ps u

在bash进程前面有条横线，意味着该进程便是用户的登录shell，所以对于一个登录用户来说带短横线的进

程只有一个。还可以看到%CPU、%MEM两个选项，前者指该进程占用的CPU时间和总时间的百分比；后者指该进程

占用的内存和总内存的百分比。

在这种情况下看到了所有控制终端的进程；但是对于其他那些没有控制终端的进程还是没有观察到，所以这

时就需要使用x选项。使用x选项可以观察到所有的进程情况。
