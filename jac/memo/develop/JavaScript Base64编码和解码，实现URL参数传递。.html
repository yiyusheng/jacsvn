<!--Download from http://www.mrans.com/html/3/5/20070130/ -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>JavaScript Base64编码和解码，实现URL参数传递。</title>
<meta name="Generator" content="Notepad,EditPlus" />
<meta name="copyright" content="Copyright 2007 - mrans_Inc" />
<meta name="Description" content="技术资料" />
<meta name="Keywords" content="技术,网站,资料,html,css,php,asp,工具,关键词, 参数 传递 实现 和解 编码 out len c3 c1 c2 /// str.charCodeAt" /> 
<meta name="author" content="JavaScript Base64编码和解码，实现URL参数传递。 www.mrans.com" />
<link href="JavaScript Base64编码和解码，实现URL参数传递。_files/world.css" rel="stylesheet" type="text/css" />
<script language='javascript'>
<!--
	function FontZoom(fsize){
		var ctext = document.getElementById("arctext");
		ctext.style.fontSize = fsize +"px";
	}
	function cleartext(e) {
		e.value='';
		e.focus();
	}
//-->
</script>
<script language="JavaScript" src="JavaScript Base64编码和解码，实现URL参数传递。_files/dedeajax2.js"></script>
<script language="JavaScript" src="JavaScript Base64编码和解码，实现URL参数传递。_files/"></script>
<script language="javascript" type="text/javascript">
<!--
	function cleartext(e) {
		e.value='';
		e.focus();
	}
	function CheckLogin(){
    var taget_obj = document.getElementById('_loginform');
    myajax = new DedeAjax(taget_obj,false,false,"","","");
    myajax.SendGet("/member/loginsta.php");
    }
//-->
</script>
</head>

<body>
<div id="tops" class="center">
  <span id="_loginform" style="float:left">
    <form name='form1' method='POST' action='/member/index_do.php'>
	    <input type="hidden" name="fmdo" value="login" />
	    <input type="hidden" name="dopost" value="login" />
	    <input type="hidden" name="gourl" value="" />
	    用户名：<input name="userid" type="text" id="userid" style="width:50px;height:14px;border:1px solid #000" />
	    密码：<input type="password" name="pwd" style="width:50px;height:14px;border:1px solid #000" />
	    验证码：<input name="vdcode" type="text" id="vdcode" style="width:36px;height:14px;border:1px solid #000" />
	    <img name="vdcode" src="JavaScript Base64编码和解码，实现URL参数传递。_files/" width="42" height="18" align="absmiddle" />
	    <input name="imageField" type="image" src="JavaScript Base64编码和解码，实现URL参数传递。_files/login.gif" width="42" height="18" border="0"  align="absmiddle" />
	    <a href="/member/index_do.php?fmdo=user&dopost=regnew" target="_blank">注册</a>&nbsp;
    </form>
  </span>
	<script language="JavaScript">CheckLogin();
	</script>
	<span style="float:right">
	  <!--<a href="http://down.mrans.com" target="_blank">精品软件</a>-->
	  <a href="http://test.mrans.com" target="_blank">网址导航</a>
	  <a href="#" onclick="this.style.behavior='url(#default#homepage)';this.setHomePage('http://www.mrans.com/');return(false);">设为首页</a>
	  <a href="#" onclick="window.external.AddFavorite('http://www.mrans.com/', 'www.mrans.com');return false;">收藏本站</a>
	  <a href="http://www.mrans.com/html/s/ads.html">联系我们</a>
  </span>
  <div class="clear">
  </div>
</div>

<!--导航栏-->
<div id="header" class="center">
  <div id="logo" class="left">
  	<!--<iframe src="http://weather.265.com/weather.htm" width="170" height="50" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no" ></iframe>-->
  	<a href="http://www.mrans.com"><img src="JavaScript Base64编码和解码，实现URL参数传递。_files/logo.gif" /></a>
  </div>
  <div id="menu" class="right">
    <div id="mt" class="right">
		  <div class="tclass left"><a href="/index.html">网站首页</a></div>
		  <div class="spaces left"></div>
		  <div class="tclass left"><a href="/html/1/index.html">开发技术</a></div>
		  <div class="spaces left"></div>
		  <div class="tclass left"><a href="/html/2/index.html">数据库类</a></div>
		  <div class="spaces left"></div>
		  <div class="tclasson left"><a href="/html/3/index.html">网页设计</a></div>
		  <div class="spaces left"></div>
		  <div class="tclass left"><a href="/html/4/index.html">操作系统</a></div>
		  <div class="spaces left"></div>
		  <div class="tclass left"><a href="/html/5/index.html">网络通信</a></div>
		  <div class="spaces left"></div>
		  <div class="tclass left"><a href="/html/6/index.html">应用开发</a></div>
		  <div class="spaces left"></div>
		  <div class="tclass left"><a href="/html/6/index.html">行业发展</a></div>
		  <div class="spaces left"></div>
		  <div class="tclass left"><a href="/special/">专题</a></div>
		</div>
	<div id="mb">
	  相关栏目:<a href="/html/3/1/index.html" class="cWhite">DIV-CSS</a>&nbsp;
	</div>
  </div>
</div>
<div class="clear"></div>
<div id="arcad" class="center">
<script src="JavaScript Base64编码和解码，实现URL参数传递。_files/ad_js.php?aid=1" language='javascript'></script>
<div class="clear"></div>
</div>

<div id="navigation" class="center cBlue">现在位置:<a href='http://www.mrans.com/'>主页</a>><a href='/html/3/index.html'>网页设计</a>><a href='/html/3/5/index.html'>Javascript</a>></div>
<div id="flistindex" class="center">
  <div id="slistl" class="left">
    <div class="slistlt">新闻正文</div>
	<div class="arcinfo center">
	  <b><h1>JavaScript Base64编码和解码，实现URL参数传递。</h1></b>
      来源:&nbsp;
	  <span class="cDRed"></span>&nbsp;
	  2007-1-30 04:32:28
      字体:[<a href='javascript:FontZoom(16)'>大</a>
       <a href='javascript:FontZoom(14)'>中</a>
       <a href='javascript:FontZoom(12)'>小</a>]
	   <a href="/member/article_add.php" target="_blank"><span class="cDRed">~我要投稿!</span></a>
	   <a href="/plus/stow.php?arcID=2256"><img src="JavaScript Base64编码和解码，实现URL参数传递。_files/file_move.gif" width="17" height="18" border="0"><span class="cDRed">收藏</span></a>
	</div>
	<div id="arctext" class="center">
	  
	  <style> .Zcm561 { display:none; } </style>
<P>为什么需要对参数进行编码？相信有过开发的经验的广大程序员都知道，在Web中，若是直接在Url地址上传递参数值，若是中文，或者+等什么的就会出现乱码现象，若是数字或者英文的好象没有什么问题，简言之，传递过来的参数是需要进行编码的。<BR>在这里，也许有人会说，为什么不直接用Server.UrlDecode和Server.UrlEncode这两个来进行编码和解码的操作呢？<br>的确，这两个服务器端对象很好使用，用起来也很方便，但是，若在客户端是HTML的Input，查询的时候页面是HTML或者其他的，反正不是.NET的，那这个对象还可以用吗？<br><BR>我现在就遇到这样的问题，查询的东东放在页面，而且那个页面我根本不想让他是.aspx结尾的，哈，感觉HTML的挺不错，而且里面的控件也是用HTML对象的。<br><!--more-->下面先来看两个函数，UTF16转UTF8和UTF8转Utf16的。<BR><STRONG><FONT color=#0000ff>function utf16to8(str) {<BR>&nbsp;&nbsp;&nbsp; var out, i, len, c;</FONT></STRONG> <font color='#FFFFFF'>mr ans</font> </P>
<P><STRONG><FONT color=#0000ff>&nbsp;&nbsp;&nbsp; out = "";<BR>&nbsp;&nbsp;&nbsp; len = str.length;<BR>&nbsp;&nbsp;&nbsp; for(i = 0; i &lt; len; i++) {<BR>&nbsp;c = str.charCodeAt(i);<BR>&nbsp;if ((c &gt;= 0x0001) && (c &lt;= 0x007F)) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += str.charAt(i);<BR>&nbsp;} else if (c &gt; 0x07FF) {<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += String.fromCharCode(0xE0 | ((c &gt;&gt; 12) & 0x0F));<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += String.fromCharCode(0x80 | ((c &gt;&gt;&nbsp; 6) & 0x3F));<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += String.fromCharCode(0x80 | ((c &gt;&gt;&nbsp; 0) & 0x3F));<BR>&nbsp;} else {<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += String.fromCharCode(0xC0 | ((c &gt;&gt;&nbsp; 6) & 0x1F));<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += String.fromCharCode(0x80 | ((c &gt;&gt;&nbsp; 0) & 0x3F));<BR>&nbsp;}<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; return out;<BR>}</FONT></STRONG> <div class='Zcm561'>www.mrans.com</div> </P>
<P><STRONG><FONT color=#0000ff>function utf8to16(str) {<BR>&nbsp;&nbsp;&nbsp; var out, i, len, c;<BR>&nbsp;&nbsp;&nbsp; var char2, char3;</FONT></STRONG> <span class='Zcm561'>mrans</span> </P>
<P><STRONG><FONT color=#0000ff>&nbsp;&nbsp;&nbsp; out = "";<BR>&nbsp;&nbsp;&nbsp; len = str.length;<BR>&nbsp;&nbsp;&nbsp; i = 0;<BR>&nbsp;&nbsp;&nbsp; while(i &lt; len) {<BR>&nbsp;c = str.charCodeAt(i++);<BR>&nbsp;switch(c &gt;&gt; 4)<BR>&nbsp;{<BR>&nbsp;&nbsp; case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:<BR>&nbsp;&nbsp;&nbsp;&nbsp; // 0xxxxxxx<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += str.charAt(i-1);<BR>&nbsp;&nbsp;&nbsp;&nbsp; break;<BR>&nbsp;&nbsp; case 12: case 13:<BR>&nbsp;&nbsp;&nbsp;&nbsp; // 110x xxxx&nbsp;&nbsp; 10xx xxxx<BR>&nbsp;&nbsp;&nbsp;&nbsp; char2 = str.charCodeAt(i++);<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += String.fromCharCode(((c & 0x1F) &lt;&lt; 6) | (char2 & 0x3F));<BR>&nbsp;&nbsp;&nbsp;&nbsp; break;<BR>&nbsp;&nbsp; case 14:<BR>&nbsp;&nbsp;&nbsp;&nbsp; // 1110 xxxx&nbsp; 10xx xxxx&nbsp; 10xx xxxx<BR>&nbsp;&nbsp;&nbsp;&nbsp; char2 = str.charCodeAt(i++);<BR>&nbsp;&nbsp;&nbsp;&nbsp; char3 = str.charCodeAt(i++);<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += String.fromCharCode(((c & 0x0F) &lt;&lt; 12) | <span class='Zcm561'>字串8</span> <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ((char2 & 0x3F) &lt;&lt; 6) |<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ((char3 & 0x3F) &lt;&lt; 0));<BR>&nbsp;&nbsp;&nbsp;&nbsp; break;<BR>&nbsp;}<BR>&nbsp;&nbsp;&nbsp; }</FONT></STRONG> <span class='Zcm561'>mrans</span> </P>
<P><STRONG><FONT color=#0000ff>&nbsp;&nbsp;&nbsp; return out;<BR>}<br></FONT></STRONG>那么为什么需要进行转化呢？因为在JavaScript中获得的中文字符是用UTF16进行编码的，和我们统一的页面标准格式UTF-8可不一样哦，所以需要先进行转化，上面的函数UTF-16到UTF8，然后再进行Base64的编码。<br>下面是关于Js进行Base64编码和解码的相关操作：<br><FONT color=#0000ff><STRONG>var base64EncodeChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";<BR>var base64DecodeChars = new Array(<BR>&nbsp;&nbsp;&nbsp; -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,<BR>&nbsp;&nbsp;&nbsp; -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,<BR>&nbsp;&nbsp;&nbsp; -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63,<BR>&nbsp;&nbsp;&nbsp; 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1,<BR>&nbsp;&nbsp;&nbsp; -1,&nbsp; 0,&nbsp; 1,&nbsp; 2,&nbsp; 3,&nbsp; 4,&nbsp; 5,&nbsp; 6,&nbsp; 7,&nbsp; 8,&nbsp; 9, 10, 11, 12, 13, 14,<BR>&nbsp;&nbsp;&nbsp; 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, <div class='Zcm561'>m r a n s</div> <BR>&nbsp;&nbsp;&nbsp; -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,<BR>&nbsp;&nbsp;&nbsp; 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1);<BR>//客户端Base64编码<BR>function base64encode(str) {<BR>&nbsp;&nbsp;&nbsp; var out, i, len;<BR>&nbsp;&nbsp;&nbsp; var c1, c2, c3;</STRONG></FONT> <div class='Zcm561'>字串7</div> </P>
<P style="COLOR: #339966"><FONT color=#0000ff><STRONG>&nbsp;&nbsp;&nbsp; len = str.length;<BR>&nbsp;&nbsp;&nbsp; i = 0;<BR>&nbsp;&nbsp;&nbsp; out = "";<BR>&nbsp;&nbsp;&nbsp; while(i &lt; len) {<BR>&nbsp;c1 = str.charCodeAt(i++) & 0xff;<BR>&nbsp;if(i == len)<BR>&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += base64EncodeChars.charAt(c1 &gt;&gt; 2);<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += base64EncodeChars.charAt((c1 & 0x3) &lt;&lt; 4);<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += "==";<BR>&nbsp;&nbsp;&nbsp;&nbsp; break;<BR>&nbsp;}<BR>&nbsp;c2 = str.charCodeAt(i++);<BR>&nbsp;if(i == len)<BR>&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += base64EncodeChars.charAt(c1 &gt;&gt; 2);<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += base64EncodeChars.charAt(((c1 & 0x3)&lt;&lt; 4) | ((c2 & 0xF0) &gt;&gt; 4));<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += base64EncodeChars.charAt((c2 & 0xF) &lt;&lt; 2);<BR>&nbsp;&nbsp;&nbsp;&nbsp; out += "=";<BR>&nbsp;&nbsp;&nbsp;&nbsp; break;<BR>&nbsp;}<BR>&nbsp;c3 = str.charCodeAt(i++);<BR>&nbsp;out += base64EncodeChars.charAt(c1 &gt;&gt; 2); <p class='Zcm561'>字串6</p> <BR>&nbsp;out += base64EncodeChars.charAt(((c1 & 0x3)&lt;&lt; 4) | ((c2 & 0xF0) &gt;&gt; 4));<BR>&nbsp;out += base64EncodeChars.charAt(((c2 & 0xF) &lt;&lt; 2) | ((c3 & 0xC0) &gt;&gt;6));<BR>&nbsp;out += base64EncodeChars.charAt(c3 & 0x3F);<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; return out;<BR>}<BR>//客户端Base64解码<BR>function base64decode(str) {<BR>&nbsp;&nbsp;&nbsp; var c1, c2, c3, c4;<BR>&nbsp;&nbsp;&nbsp; var i, len, out;</STRONG></FONT> <p class='Zcm561'>字串7</p> </P>
<P style="COLOR: #000000"><FONT color=#0000ff><STRONG>&nbsp;&nbsp;&nbsp; len = str.length;<BR>&nbsp;&nbsp;&nbsp; i = 0;<BR>&nbsp;&nbsp;&nbsp; out = "";<BR>&nbsp;&nbsp;&nbsp; while(i &lt; len) {<BR>&nbsp;/* c1 */<BR>&nbsp;do {<BR>&nbsp;&nbsp;&nbsp;&nbsp; c1 = base64DecodeChars[str.charCodeAt(i++) & 0xff];<BR>&nbsp;} while(i &lt; len && c1 == -1);<BR>&nbsp;if(c1 == -1)<BR>&nbsp;&nbsp;&nbsp;&nbsp; break;</STRONG></FONT> <span class='Zcm561'>mrans.com</span> </P>
<P style="COLOR: #000000"><FONT color=#0000ff><STRONG>&nbsp;/* c2 */<BR>&nbsp;do {<BR>&nbsp;&nbsp;&nbsp;&nbsp; c2 = base64DecodeChars[str.charCodeAt(i++) & 0xff];<BR>&nbsp;} while(i &lt; len && c2 == -1);<BR>&nbsp;if(c2 == -1)<BR>&nbsp;&nbsp;&nbsp;&nbsp; break;</STRONG></FONT> <div class='Zcm561'>字串6</div> </P>
<P style="COLOR: #000000"><FONT color=#0000ff><STRONG>&nbsp;out += String.fromCharCode((c1 &lt;&lt; 2) | ((c2 & 0x30) &gt;&gt; 4));</STRONG></FONT> <span class='Zcm561'>m r a n s</span> </P>
<P style="COLOR: #000000"><FONT color=#0000ff><STRONG>&nbsp;/* c3 */<BR>&nbsp;do {<BR>&nbsp;&nbsp;&nbsp;&nbsp; c3 = str.charCodeAt(i++) & 0xff;<BR>&nbsp;&nbsp;&nbsp;&nbsp; if(c3 == 61)<BR>&nbsp; return out;<BR>&nbsp;&nbsp;&nbsp;&nbsp; c3 = base64DecodeChars[c3];<BR>&nbsp;} while(i &lt; len && c3 == -1);<BR>&nbsp;if(c3 == -1)<BR>&nbsp;&nbsp;&nbsp;&nbsp; break;</STRONG></FONT> <span class='Zcm561'>mrans.com</span> </P>
<P style="COLOR: #000000"><FONT color=#0000ff><STRONG>&nbsp;out += String.fromCharCode(((c2 & 0XF) &lt;&lt; 4) | ((c3 & 0x3C) &gt;&gt; 2));</STRONG></FONT> <span class='Zcm561'>www.mrans.com</span> </P>
<P><FONT color=#0000ff><STRONG>&nbsp;/* c4 */<BR>&nbsp;do {<BR>&nbsp;&nbsp;&nbsp;&nbsp; c4 = str.charCodeAt(i++) & 0xff;<BR>&nbsp;&nbsp;&nbsp;&nbsp; if(c4 == 61)<BR>&nbsp; return out;<BR>&nbsp;&nbsp;&nbsp;&nbsp; c4 = base64DecodeChars[c4];<BR>&nbsp;} while(i &lt; len && c4 == -1);<BR>&nbsp;if(c4 == -1)<BR>&nbsp;&nbsp;&nbsp;&nbsp; break;<BR>&nbsp;out += String.fromCharCode(((c3 & 0x03) &lt;&lt; 6) | c4);<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; return out;<BR>}<BR></STRONG></FONT><BR>这样传递过去的值就可以在服务器端解码操作了。<BR>下面是C#的Base64加码和解码的相关类：<BR><FONT color=#0000ff><STRONG>using System;<BR>using System.Data;<BR>using System.Configuration;<BR>using System.Web;<BR>using System.Web.Security;<BR>using System.Web.UI;<BR>using System.Web.UI.WebControls;<BR>using System.Web.UI.WebControls.WebParts;<BR>using System.Web.UI.HtmlControls;</STRONG></FONT> <span class='Zcm561'>字串9</span> </P>
<P><FONT color=#0000ff><STRONG>namespace CNVP.Base64<BR>{<BR>&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<BR>&nbsp;&nbsp;&nbsp; /// MyBase64 的摘要说明<BR>&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<BR>&nbsp;&nbsp;&nbsp; public class MyBase64<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public MyBase64()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // TODO: 在此处添加构造函数逻辑<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 服务器端Base64编码<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="data"&gt;&lt;/param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;returns&gt;&lt;/returns&gt; <p class='Zcm561'>mrans</p> <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string base64Encode(string data)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; byte[] encData_byte = new byte[data.Length];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; encData_byte = System.Text.Encoding.UTF8.GetBytes(data);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string encodedData = Convert.ToBase64String(encData_byte);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return encodedData;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <p class='Zcm561'>字串9</p> <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new Exception("Error in base64Encode" + e.Message);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 服务器端Base64解码<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="data"&gt;&lt;/param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;returns&gt;&lt;/returns&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string base64Decode(string data)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.Text.UTF8Encoding encoder = new System.Text.UTF8Encoding(); <font color='#FFFFFF'>mr ans</font> <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.Text.Decoder utf8Decode = encoder.GetDecoder();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; byte[] todecode_byte = Convert.FromBase64String(data);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int charCount = utf8Decode.GetCharCount(todecode_byte, 0, todecode_byte.Length);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; char[] decoded_char = new char[charCount];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; utf8Decode.GetChars(todecode_byte, 0, todecode_byte.Length, decoded_char, 0);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string result = new String(decoded_char);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return result; <p class='Zcm561'>字串7</p> <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new Exception("Error in base64Decode" + e.Message);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }<BR>}</STRONG><BR></FONT><BR><FONT color=#ff0000><STRONG>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var Keyword=base64encode(utf16to8(document.all.Keyword.value));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Keyword=Keyword.replace("+","%2B");//替换+，否则在服务器解码的时候会出错</STRONG></FONT><BR>服务器端使用以下代码调用：<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <FONT color=#0000ff><STRONG>CNVP.Base64.MyBase64 base64 = new CNVP.Base64.MyBase64();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Keyword=base64.base64Decode(Keyword);</STRONG></FONT> <div class='Zcm561'>mrans</div> </P><br />
      <center></center><br />
	  <span class="f12"><script src="JavaScript Base64编码和解码，实现URL参数传递。_files/ad_js.php?aid=5" language='javascript'></script>
	  上一篇：<a href='/html/3/5/20070130/2255.html'>JavaScript静态的动态</a>  <br />下一篇：<a href='/html/3/5/20070130/2257.html'>跨浏览器的设置innerHTML方法</a> </span>
	</div>
	<div class="yousend">
	 <div class="sendwin center">
	  <script src="JavaScript Base64编码和解码，实现URL参数传递。_files/feedback_js.php?arcID=2256"></script>
	 </div>
	</div>
	<div id="yousend">
	 <div class="sendwin center">
	  <form action="/plus/feedback.php?action=send" target="_blank" method="post" name="feedback">
	  <input type="hidden" name="arcID" value="2256">
	  用户名：<input name="username" type="text" id="username" size="10" class="nb">
	  （<a href="/member/index_do.php?fmdo=user&dopost=regnew" target="_blank"><u>新注册</u></a>）
	  密码：<input name="pwd" type="text" id="pwd" size="10"class="nb"> 
      <input name="notuser" type="checkbox" id="notuser" value="1">
	  匿名评论
	  [<a href="/plus/feedback.php?arcID=2256" target="_blank">评论(0条)</a>]
	  <input type='button' value='提交评论' name='sb' onClick='javascript:if(document.feedback.msg.value!="")
	  document.feedback.submit(); else alert("评论内容不能为空！");' style='width:60;height:20; font-size:12px'><br />
	  评论内容：不能超过250字，需审核后才会公布，请自觉遵守互联网相关政策法规。
	  <textarea name="msg" cols="75" rows="4" id="msg" style="width:98%"></textarea></form>
	 </div>
	</div>
	<div class="yousend">
	  <div class="videos center">
	    <script src="JavaScript Base64编码和解码，实现URL参数传递。_files/ad_js.php?aid=4" language='javascript'></script>
		<span class="clear"></span>
	  </div>
	</div>
  </div>
  <div id="slistr" class="right">
    <div class="crclass"><!-- 搜索 -->
	  <div class="crt">
	    <span class="cBlue">本栏搜索</span>
	  </div>
	  <div class="crc list">
	    <ul>
	      <li>
		   <form method="post" action="/plus/search.php" name="searchform" target="_top">
		    <input name="keyword" class="text" type="text" onclick=cleartext(this); value="&nbsp;站内搜索系统" style="width:138px;" />
		    <input class="button" type="image" alt="" src="JavaScript Base64编码和解码，实现URL参数传递。_files/Search_icon.gif" align=absMiddle value=Go />
		    <input name="searchtype" type="hidden" value="title" />
		    <input type='hidden' name='kwtype' value='0' />
		   </form>
		  </li>
		  <li>
		   <form method="get" action="http://www.google.com/search" target="_blank"> 
             <input type="text" class="text" name="q" onclick=cleartext(this); value="&nbsp;mrans By Google" style="width:138px;" />
			 <input class="button" type="image" src="JavaScript Base64编码和解码，实现URL参数传递。_files/Search_Google.gif"  align="absMiddle" value="Go" name="btnG" />
             <input type="hidden" name="ie" value="GB2312" /> 
             <input type="hidden" name="oe" value="GB2312" />
             <input type="hidden" name="hl" value="zh-CN" />
             <input type="hidden" name="domains" value="www.mrans.com" /><br />
             <input type="radio" name="sitesearch" value="" />Google
             <input type="radio" name="sitesearch" value="www.mrans.com" checked="checked" />mrans.Com
           </form>
		  </li>
		</ul>
	  </div>
	</div>
    <div class="crclass"><!-- 推荐 -->
	  <div class="crt">
	    <span class="cBlue">推荐新闻</span>
	  </div>
	  <div class="crc list">
	    <ul>
	      <li>・<a href="/html/3/5/20070202/4814.html" target="_blank">页面自动刷新，又不用让用</a></li>
<li>・<a href="/html/3/5/20070202/4815.html" target="_blank">在网页中实现OICQ里的头像</a></li>
<li>・<a href="/html/3/5/20070202/4812.html" target="_blank">用 PerlScript  ASP W</a></li>
<li>・<a href="/html/3/5/20070202/4813.html" target="_blank">表单填写时用 回车 代替 TA</a></li>
<li>・<a href="/html/3/5/20070202/4810.html" target="_blank">利用JS在页面上动态生成直</a></li>
<li>・<a href="/html/3/5/20070202/4811.html" target="_blank">打开页面就是全屏的方法</a></li>
<li>・<a href="/html/3/5/20070202/4808.html" target="_blank">确认是否关闭浏览器或转到</a></li>
<li>・<a href="/html/3/5/20070202/4809.html" target="_blank">通过地址栏传递参数.通过ur</a></li>
<li>・<a href="/html/3/5/20070202/4807.html" target="_blank">一段对密码进行加密的脚本</a></li>
<li>・<a href="/html/3/5/20070202/4869.html" target="_blank">减轻JavaScript测试和调试</a></li>

		</ul>
	  </div>
	</div>
    <div class="crclass"><!-- 热门 -->
	  <div class="crt">
	    <span class="cBlue">热门新闻</span>
	  </div>
	  <div class="crc list">
	    <ul>
	      <li>・<a href="/html/3/5/20070202/4814.html" target="_blank">页面自动刷新，又不用让用</a></li>
<li>・<a href="/html/3/5/20070202/4815.html" target="_blank">在网页中实现OICQ里的头像</a></li>
<li>・<a href="/html/3/5/20070202/4812.html" target="_blank">用 PerlScript  ASP W</a></li>
<li>・<a href="/html/3/5/20070202/4813.html" target="_blank">表单填写时用 回车 代替 TA</a></li>
<li>・<a href="/html/3/5/20070202/4810.html" target="_blank">利用JS在页面上动态生成直</a></li>
<li>・<a href="/html/3/5/20070202/4811.html" target="_blank">打开页面就是全屏的方法</a></li>
<li>・<a href="/html/3/5/20070202/4808.html" target="_blank">确认是否关闭浏览器或转到</a></li>
<li>・<a href="/html/3/5/20070202/4809.html" target="_blank">通过地址栏传递参数.通过ur</a></li>
<li>・<a href="/html/3/5/20070202/4807.html" target="_blank">一段对密码进行加密的脚本</a></li>
<li>・<a href="/html/3/5/20070202/4869.html" target="_blank">减轻JavaScript测试和调试</a></li>

		</ul>
	  </div>
	</div>
	<div class="crclass"><!-- 相关 -->
	  <div class="crt">
	    <span class="cBlue">相关新闻</span>
	  </div>
	  <div class="crc list">
	    <ul>
	      <li>・<a href="/html/3/5/20070130/2255.html" target="_blank">JavaScript静态的动态</a></li>
<li>・<a href="/html/3/5/20070130/2257.html" target="_blank">跨浏览器的设置innerHTML方</a></li>
<li>・<a href="/html/3/5/20070130/2258.html" target="_blank">多个iframe自动调整大小的</a></li>
<li>・<a href="/html/3/5/20070130/2254.html" target="_blank">基于Web标准的UI组件 ― 树</a></li>
<li>・<a href="/html/3/5/20070130/2259.html" target="_blank">判断checkbox选择的个数 多</a></li>
<li>・<a href="/html/3/5/20070130/2253.html" target="_blank">JavaScript中的私有成员</a></li>
<li>・<a href="/html/3/5/20070130/2260.html" target="_blank">发现的以前不知道的函数</a></li>
<li>・<a href="/html/3/5/20070130/2252.html" target="_blank">菜单制作学习一个小东西[原</a></li>
<li>・<a href="/html/3/5/20070130/2261.html" target="_blank">Js+XML 操作</a></li>
<li>・<a href="/html/3/5/20070130/2251.html" target="_blank">对联广告</a></li>

		</ul>
	  </div>
	</div>
  </div>
</div>
<script src="JavaScript Base64编码和解码，实现URL参数传递。_files/count.php?aid=2256&mid=0" language="javascript"></script>
<div class="clear"></div>
<div id="aboutus" class="center">&nbsp;
	　<a href="/index.htm">网站首页</a>　    　-　　 
	　<a href="/rssmap.html" target="_blank">网站地图</a>　   　 -　　 
	　<a href="/member/login.php?gourl=%2Fmember%2Fartsend.php" target="_blank">网站投稿</a>　    　-　 　
	　<a href="/html/s/ads.html" target="_blank">广告服务</a>　    　-　 　
	　<a href="/html/s/help.html" target="_blank">帮助中心</a>
</div>
<div id="contactus" class="center">
Copyright 2007 www.mrans.com All Rights Reserved<br />
  <div style="display:none;">
    <script src="JavaScript Base64编码和解码，实现URL参数传递。_files/stat.php?id=387158&web_id=387158&show=pic1" language='JavaScript' charset='gb2312'></script>
  </div>
  <div style="display:none;">
	  <script language="javascript" type="text/javascript" src="JavaScript Base64编码和解码，实现URL参数传递。_files/846281.js"></script>
		<noscript><a href="http://www.51.la/?846281" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/846281.asp" style="border:none" /></a></noscript>
  </div>
</div>
</body>
</html>
